## 1.3 Новые типы сетей и возможности их анализа: Многосторонние сети
### Введение
По следам конференции IFCS 2022, на которой итальянские коллеги представили оригинальные эмпирические данные о мобильности итальянских студентов, В. Батагель вновь заинтересовался темой многосторонних сетей. Структура их базы данных выглядела следующим образом:

![Структура данных для построения многосторонней сети](images/1_Batagelj.png) {#fig:1_batagelj}

В данном случае, *стороны* - это векторы (переменные), такие как провинция (prov), университет (univ), образовательная программа (prog) и год (year). Путям соответствуют веса (w) - сколько студентов были попали на мобильность в эти провинцию, университет, программу и год. Такая структура данных называется *взвешенной многосторонней (multiway) сетью*. 

Стратегия анализа этих данных со стороны моих коллег заключалась в следующем. Они разделили данные по каждому году отдельно (т.к. уникальных значений было немного, это было легко), и в каждом из этих наборов данных соединили пути "университет" и "образовательная программа" в один. Таким образом, у них получилась взвешенная двудольная (two-mode, bipartite) сеть (граф), методы анализа которых уже давно известны. В. Батагель трансформировал эти данные в R и создал их визуализацию, которую сохранил в формате json. Также он добавил дополнительные региональные данные из открытых источников.

### Многосторонние сети
#### Формальное определение и свойства
Взвешенная многосторонняя сеть $N = (V, L, w)$ состоит из узлов конечного числа множеств $k$ (сторон, измерений) $V = (V_1,V_2,...,V_k)$, множества ребер $L$ и весов $w: L \rightarrow \mathbb{R}$. Множества узлов и ребер соединяются с помощью функции инцидентности $I: L \rightarrow V_1 \times V_2 \times ... V_k$, которая назначает для каждого ребра $e \in L$ его $k-$кортеж из узлов $I(e) = [e(1), e(2),...,e(i),...,e(k)], e(i) \in V_1$. Если для некоторых разных узлов $i \neq j$ совпадают их измерения $V_i = V_j$, мы говорим, что множества $V_i, V_j$ имеют один порядок (mode). 

В многосторонней сети как для набора узлов, так и ребер могут быть известны дополнительные атрибуты $N = (V,L,P,W)$, где $P$ - это множество узловых атрибутов $p: V_1 \rightarrow S_p$ а $W$ - множество реберных весов $w: L \rightarrow S_w$

Для подмножества ребер $L' \subseteq L$  мы обозначаем
$$
\begin{aligned}
V_i(L') = \{e(i):e \in L'\}
\end{aligned}$$
множество узлов стороны $V_i$ которые являются конечными точками ребра, исходящего из $L'$. 

Многосторонняя сеть $N$ называется *простой* тогда и только тогда, когда все ее реберные кортежи взаимно различны: $\forall e, f \in L, e \neq f \longrightarrow I(e) \neq I(f)$.

Многосторонняя сеть $N' = (V', L', P', W')$ называется *подсетью* многосторонней сети $N = (V,L,P,W)$ тогда и только тогда, когда ее можно получить из $N$ за счет удаления:
- некоторых узлов. Если мы убираем узел $v \in V_i$ мы также убираем все ребра $e \in L$, которые содержат в себе этот узел $e(i) = v$
- некоторых ребер
- некоторых сторон
- некоторых атрибутов из множеств $P$ или $W$.

Для многосторонних сетей также возможно говорить об их гомоморфизме/изоморфизме.

*Звездой* узла $u \in V_i$ называется множество ребер такое, что
$$
\begin{aligned}
S(u) = \{e \in L:e(i) = u\}.
\end{aligned}$$

#### Многосторонний анализ
Помимо понятия многосторонних сетей, в области анализа данных также существует подход многостороннего анализа (multiway analysis) [@kroonenberg2008]. Он опирается на схожее представление о данных как многосторонних структурах. Однако в отличие от сетевого анализа, многосторонний анализ находится в русле традиционного многофакторного статистического анализа, который опирается на линейную алгебру, а не реляционную алгебру и теорию графов как сетевой анализ [@morup2011], который можно назвать "комбинаторным подходом".

#### Опыт реализации
В. Батагель уже работал над косвенным подходом к блокмоделингу дихотомизированных 3-сторонних сетей [@batagelj2007]. В частности, с коллегами мы разработали подход к блокмоделингу 3-сторонних сетей. Визуализация его работы - на рисунке ниже.

![Блокмоделинг 3-сторонней сети](images/2_Batagelj.png) {#fig:2_batagelj}

Для схожих целей он позже разработал целый пакет в R [@batagelj2023]. 


### Кластеризация
### Кейс: Европейские аэропорты
### Ядра
### Кейс: Олимпийские игры
